# üöÄ –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è EXCAMAD

–î–∞–Ω–Ω–∞—è –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç PowerShell —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä Camunda.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
cmunda_serv/
‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îú‚îÄ‚îÄ deploy-nginx.ps1           # –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ camunda                    # Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Camunda —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ camunda.eg-holding.ru      # Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å CORS –¥–ª—è Camunda
‚îÇ   ‚îî‚îÄ‚îÄ excamad.eg-holding.ru      # Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è EXCAMAD –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ cors/
‚îÇ   ‚îú‚îÄ‚îÄ deploy-cors.ps1            # –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ web.xml                    # Camunda web.xml —Å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
‚îî‚îÄ‚îÄ README.md                      # –î–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
```

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
- **Windows PowerShell 5.1+** –∏–ª–∏ **PowerShell Core 6.0+**
- **PuTTY** —Å —É—Ç–∏–ª–∏—Ç–∞–º–∏ `pscp` –∏ `plink`
- –°–µ—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É: `109.172.36.204`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ SSH –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. –î–æ–±–∞–≤—å—Ç–µ PuTTY –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é PATH –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º —Ñ–∞–π–ª–∞–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
```powershell
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ pscp
pscp --help

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ plink  
plink --help

# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
plink -batch root@109.172.36.204 "echo 'Connection test'"
```

## üì§ –î–µ–ø–ª–æ–π Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```powershell
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É nginx
cd cmunda_serv\nginx

# –ü—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
.\deploy-nginx.ps1

# –î–µ–ø–ª–æ–π —Å –≤–∫–ª—é—á–µ–Ω–∏–µ–º —Å–∞–π—Ç–æ–≤
.\deploy-nginx.ps1 -EnableSites

# –†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–∞–π–ª–æ–≤)
.\deploy-nginx.ps1 -DryRun
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏
```powershell
# –î–µ–ø–ª–æ–π –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä
.\deploy-nginx.ps1 -ServerIP "192.168.1.100"

# –£–∫–∞–∑–∞–Ω–∏–µ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
.\deploy-nginx.ps1 -Username "admin"

# –£–∫–∞–∑–∞–Ω–∏–µ –¥—Ä—É–≥–æ–≥–æ –ø—É—Ç–∏
.\deploy-nginx.ps1 -RemotePath "/etc/nginx/conf.d"

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫
.\deploy-nginx.ps1 -EnableSites -DryRun
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö nginx —Ñ–∞–π–ª–æ–≤
2. üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. üîó –í–∫–ª—é—á–∞–µ—Ç —Å–∞–π—Ç—ã (–ø—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ -EnableSites)
4. üîç –¢–µ—Å—Ç–∏—Ä—É–µ—Ç nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
5. üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç nginx

## üìã –î–µ–ø–ª–æ–π CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```powershell
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É cors
cd cmunda_serv\cors

# –ü—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π —Å –±—ç–∫–∞–ø–æ–º
.\deploy-cors.ps1

# –î–µ–ø–ª–æ–π —Å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º Tomcat
.\deploy-cors.ps1 -RestartTomcat

# –†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
.\deploy-cors.ps1 -DryRun
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏
```powershell
# –î–µ–ø–ª–æ–π –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–∞
.\deploy-cors.ps1 -CreateBackup:$false

# –£–∫–∞–∑–∞–Ω–∏–µ –¥—Ä—É–≥–æ–≥–æ –ø—É—Ç–∏ –¥–ª—è –±—ç–∫–∞–ø–æ–≤
.\deploy-cors.ps1 -BackupPath "/home/backups"

# –î–µ–ø–ª–æ–π –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä —Å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º
.\deploy-cors.ps1 -ServerIP "192.168.1.100" -RestartTomcat

# –£–∫–∞–∑–∞–Ω–∏–µ –¥—Ä—É–≥–æ–≥–æ –ø—É—Ç–∏ –∫ Tomcat
.\deploy-cors.ps1 -RemotePath "/opt/tomcat/webapps/engine-rest/WEB-INF"
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å XML —Ñ–∞–π–ª–∞
2. üíæ –°–æ–∑–¥–∞–µ—Ç –±—ç–∫–∞–ø —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞
3. üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π web.xml
4. üîê –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
5. üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç Tomcat (–ø—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ -RestartTomcat)

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ "pscp –Ω–µ –Ω–∞–π–¥–µ–Ω"
```powershell
# –î–æ–±–∞–≤—å—Ç–µ PuTTY –≤ PATH –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å
$env:PATH += ";C:\Program Files\PuTTY"

# –ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ PuTTY —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞
# https://www.putty.org/
```

### –û—à–∏–±–∫–∞ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```powershell
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
plink root@109.172.36.204

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SSH –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
# –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª—å
```

### –û—à–∏–±–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
```powershell
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ PowerShell –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
# –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Tomcat
```powershell
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Tomcat –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
plink root@109.172.36.204 "systemctl status tomcat9"

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Tomcat
plink root@109.172.36.204 "tail -f /opt/camunda7/server/apache-tomcat-10.1.36/logs/catalina.out"
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ nginx
```powershell
# –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞
plink root@109.172.36.204 "tail -f /var/log/nginx/access.log"

# –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
plink root@109.172.36.204 "tail -f /var/log/nginx/error.log"

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–∞–π—Ç–∞
plink root@109.172.36.204 "tail -f /var/log/nginx/excamad.access.log"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```powershell
# –°—Ç–∞—Ç—É—Å nginx
plink root@109.172.36.204 "systemctl status nginx"

# –°—Ç–∞—Ç—É—Å Tomcat
plink root@109.172.36.204 "systemctl status tomcat9"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤
plink root@109.172.36.204 "netstat -tlnp | grep -E '(80|443|8080)'"
```

## üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```powershell
# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–∞–π—Ç–∞
plink root@109.172.36.204 "rm /etc/nginx/sites-enabled/excamad.eg-holding.ru"

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ git
plink root@109.172.36.204 "cd /etc/nginx/sites-available && git checkout HEAD -- excamad.eg-holding.ru"
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```powershell
# –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±—ç–∫–∞–ø–æ–≤
plink root@109.172.36.204 "ls -la /opt/camunda7/backups/"

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ TIMESTAMP)
plink root@109.172.36.204 "cp /opt/camunda7/backups/web.xml.backup.TIMESTAMP /opt/camunda7/server/apache-tomcat-10.1.36/webapps/engine-rest/WEB-INF/web.xml"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Tomcat
plink root@109.172.36.204 "systemctl restart tomcat9"
```

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### Nginx
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- [ ] –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–æ–º–µ–Ω–Ω—ã—Ö –∏–º–µ–Ω
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω–æ

### CORS
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å XML
- [ ] –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ CORS –Ω–∞—Å—Ç—Ä–æ–µ–∫
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- [ ] –°–æ–∑–¥–∞–Ω –±—ç–∫–∞–ø —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ -DryRun** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª—å–Ω—ã–º –¥–µ–ø–ª–æ–µ–º
2. **–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –±—ç–∫–∞–ø—ã** –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –¥–ª—è —É–±–µ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ
4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ CORS** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
5. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∂–∏–º -DryRun –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

**–£–¥–∞—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è! üöÄ** 